# 后台系统操作指南

## 1. 待完成任务清单

| 任务描述 | 优先级 | 截止日期 | 状态 |
|---------|-------|---------|------|
| 实现用户认证和授权机制 | 高 | 2025-12-28 | 待完成 |
| 替换JWT密钥为更安全的密钥 | 高 | 2025-12-27 | 待完成 |
| 实现API请求频率限制 | 高 | 2025-12-29 | 待完成 |
| 实现数据备份和恢复功能 | 高 | 2026-01-04 | 待完成 |
| 优化API响应时间，添加缓存机制 | 中 | 2025-12-30 | 待完成 |
| 实现文章搜索和过滤功能 | 中 | 2025-12-31 | 待完成 |
| 添加数据导出功能 | 中 | 2026-01-02 | 待完成 |
| 实现HTTPS支持 | 中 | 2026-01-05 | 待完成 |
| 添加更详细的API日志记录 | 中 | 2026-01-03 | 待完成 |
| 添加API文档自动生成功能 | 低 | 2026-01-06 | 待完成 |

## 2. 后台系统数据同步状态

### 2.1 同步状态概览
- **同步状态**：已完成
- **同步时间**：2025-12-25 16:05:44
- **同步模式**：自动同步（每30秒）+ 手动同步

### 2.2 数据完整性检查
- **总文章数**：7篇
- **文章分类**：4个分类（命学基础、名人八字、花果论心法、杂谈随笔）
- **数据库表**：2个表（articles、sync_events）
- **数据字段**：完整，包含标题、内容、分类、浏览量、点赞数等

### 2.3 API服务状态
- **服务地址**：http://localhost:3000
- **健康检查**：正常（http://localhost:3000/api/v1/health）
- **文章列表接口**：正常（http://localhost:3000/api/v1/articles）
- **同步接口**：正常（http://localhost:3000/api/v1/articles/sync）

## 3. 后台系统操作说明

### 3.1 权限要求
- **访问权限**：管理员权限
- **登录凭证**：
  - 用户名：admin
  - 密码：admin123
- **API访问**：公开接口无需认证，管理员接口需要JWT Token

### 3.2 操作流程

#### 3.2.1 启动API服务
1. 打开命令提示符或终端
2. 进入项目目录：`cd c:\Users\agenew\Desktop\1\api`
3. 执行启动命令：
   ```powershell
   $env:PATH = "C:\Program Files\nodejs;$env:PATH"; node server.js
   ```
4. 确认服务启动成功，终端显示：
   ```
   文章同步API服务已启动，监听端口 3000
   健康检查: http://localhost:3000/api/v1/health
   ```

#### 3.2.2 访问管理后台
1. 打开浏览器
2. 访问地址：`file:///c:/Users/agenew/Desktop/1/admin.html`
3. 页面会自动加载最新的文章数据
4. 系统会每30秒自动刷新一次数据

#### 3.2.3 查看数据概览
1. 进入管理后台首页
2. 查看顶部的统计卡片：总文章数、总浏览量、总点赞数、总留言数
3. 查看热门文章排行：热门浏览量、热门点赞数、热门留言数
4. 查看分类统计数据

#### 3.2.4 管理文章
1. 点击"文章管理"标签
2. 使用筛选条件（分类、关键词、日期范围）查找文章
3. 点击文章标题查看详情
4. 点击"编辑"按钮修改文章内容
5. 点击"删除"按钮删除文章
6. 点击"移动分类"按钮调整文章分类

#### 3.2.5 数据可视化
1. 点击"数据可视化"标签
2. 查看总览统计
3. 查看热门文章排行
4. 查看分类统计
5. 点击"刷新数据"按钮手动刷新

#### 3.2.6 导入导出数据
1. 点击"导入导出"标签
2. **导入数据**：
   - 点击"选择JSON文件"选择要导入的文件
   - 点击"导入"按钮
3. **导出数据**：
   - 点击"导出为JSON文件"按钮
   - 选择保存位置

#### 3.2.7 查看同步历史
1. 点击"同步历史"标签
2. 查看所有同步事件记录
3. 查看事件详情
4. 点击"清除历史"按钮清理旧记录

### 3.3 注意事项

#### 3.3.1 API服务管理
- 确保Node.js环境正常运行
- 确保端口3000未被其他程序占用
- 定期检查API服务日志，排查异常

#### 3.3.2 数据安全
- 定期备份数据库文件（位于`api/database/articles.db`）
- 生产环境中替换JWT密钥（位于`api/server.js`第20行）
- 考虑使用HTTPS协议保护API通信
- 避免在日志中记录敏感信息

#### 3.3.3 性能优化
- 避免同时打开多个管理后台页面
- 定期清理旧的同步事件记录
- 考虑在生产环境中使用更高效的数据库（如MySQL、PostgreSQL）

#### 3.3.4 错误处理
- 如果页面显示数据异常，检查浏览器控制台日志
- 如果API服务异常，检查终端输出日志
- 如果数据同步失败，检查网络连接和API服务状态
- 如果导入/导出失败，检查文件格式和权限

#### 3.3.5 浏览器兼容性
- 推荐使用Chrome 80+或Firefox 75+浏览器
- 确保浏览器已启用JavaScript
- 确保浏览器允许跨域请求

## 4. 技术支持

### 4.1 常见问题

**Q: API服务无法启动**
A: 检查Node.js环境是否正常，依赖包是否已安装，端口3000是否被占用

**Q: 管理后台显示数据为0**
A: 检查API服务是否正常运行，浏览器控制台是否有错误日志，尝试手动刷新数据

**Q: 数据同步失败**
A: 检查网络连接，检查API服务状态，查看同步事件记录

**Q: 导入数据失败**
A: 检查JSON文件格式是否正确，确保文件包含必要的字段

### 4.2 日志位置
- **API服务日志**：终端输出
- **浏览器日志**：浏览器开发者工具控制台
- **同步事件日志**：管理后台"同步历史"标签

### 4.3 紧急处理

**情况**：API服务崩溃
**处理**：重启API服务，检查日志排查原因

**情况**：数据库损坏
**处理**：使用备份文件恢复，检查数据库文件权限

**情况**：数据丢失
**处理**：从备份恢复，检查同步机制，排查数据丢失原因

## 5. 版本信息

- **系统版本**：1.0.0
- **API版本**：v1
- **数据库**：SQLite 3
- **Node.js版本**：v24.12.0
- **最后更新**：2025-12-25

---

**说明**：本操作指南用于指导后台系统的日常管理和维护，如有疑问或遇到问题，请及时检查日志或联系技术支持。